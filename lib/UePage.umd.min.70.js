"use strict";(("undefined"!=typeof self?self:this).webpackChunkUePage=("undefined"!=typeof self?self:this).webpackChunkUePage||[]).push([[70],{1070:(t,e,r)=>{r.r(e),r.d(e,{dealFormMessage:()=>i});r(4936),r(5079);var n=r(2956),o=r(8291);const c={require:{test:/\S+/,errMsg:"此项不能为空"},number:{test:/^[0-9]+$/,errMsg:"只能输入数字"},email:{test:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,errMsg:"请输入正确的邮箱"},phone:{test:/^[1][3,4,5,7,8][0-9]{9}$/,errMsg:"请输入正确的手机号"},date:{test:/^[0-9]{4}-[0-9]{2}-[0-9]{2}(\s[0-9]{2}:[0-9]{2})?$/,errMsg:"请输入正确的时间，格式为 2018-09-10 或者 2018-09-10 21:09"}};function i(t,e={}){const r=o(t).find("."+n.Z["form-code-img"]),i=r.attr("src"),s=Object.assign({getCodeImgUrl:()=>"",formSubmit:(t,e)=>Promise.resolve()},e);function a(){const t=s.getCodeImgUrl();t&&r.attr("src",t)}a(),o(t).find(n.Z["form-code-img"]).on("click",a);const u=o(t).find("."+n.Z["form-row"]),f=o(t).find("."+n.Z["submit-btn"]),l=o(t).find("."+n.Z["form-row--submit"]),d=n.Z["form-err_msg"];function p(t,e){const r=o(t).find("."+d);e&&r.length?r.text(e):!e||r.length||o(`<div class="${d}">${e}</div>`).appendTo(t)}function h(){o(t).find("."+d).remove()}function m(){h(),g();let t=!0;return u.each((function(e,r){const n=o(r).find("input,select,textarea");if(!n||!n.length)return;let i="";const s=function(t){let e="";return e="checkbox"===t.eq(0).attr("type")?String(t.filter("input[type='checkbox']:checked").val()||""):"radio"===t.eq(0).attr("type")?String(t.filter("input[type='radio']:checked").val()||""):(t.val()||"").toString().trim(),e}(n),a=o(r).data("ruler").split(",");a.includes("require")&&o(a).each((function(e,n){if(c[n]){c[n].test.test(s.trim())||(t=!1,i=c[n].errMsg)}e==a.length-1&&i.length&&p(r,i)}))})),t}function g(t){t?l.attr("data-status",t):l.removeAttr("data-status")}let v=!1;return f.on("click",(()=>{if(v)return;if(!m())return void p(l[0],"请检查表单后重新提交");g("loading");const e=o(t).serializeArray();s.formSubmit(e,function(t){const e={code:"",type:"",content:"<style>table{border-right:#cccccc 1px solid;border-bottom:#cccccc 1px solid;}tr{ margin:0; padding:0}td,th{ border-left:#cccccc 1px solid;border-top:#cccccc 1px solid; margin:0; padding:0 10px; font-size:14px; background:#f8f8f8; color:#666; line-height:30px}</style>"};if("object"!=typeof t)return e;const r={};t.forEach((t=>{const e=t.name;e in r?r[e].value.push(t.value):r[e]={name:e,value:[t.value]}})),e.content+='<table width="600" border="0" cellspacing="0"> <tbody>';for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const n=r[t];"code"==n.name?e.code=n.value[0]:"type"==n.name?e.type=n.value[0]:e.content+="<tr><th>"+n.name+"</th><td>"+n.value+"</td></tr>"}return e.content+="</tbody> </table>",e.content+='<p style="color:#666; font-size:12px">来自&nbsp;&nbsp;'+window.location.host+"</p>",e}(e)).then((()=>{g("success")}),(t=>{g("error"),p(l[0],t||"提交失败，出现未知错误")})).finally((()=>{v=!1,a()}))})),{destroy(){v=!1,g(),h(),r.attr("src",i||""),o(t).find(n.Z["form-code-img"]).off("click"),f.off("click")}}}},3755:(t,e,r)=>{var n=r(1414),o=r(3397),c=TypeError;t.exports=function(t){if(n(t))return t;throw new c(o(t)+" is not a constructor")}},1414:(t,e,r)=>{var n=r(9668),o=r(4694),c=r(688),i=r(1566),s=r(2160),a=r(1881),u=function(){},f=[],l=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=n(d.exec),h=!d.test(u),m=function(t){if(!c(t))return!1;try{return l(u,f,t),!0}catch(t){return!1}},g=function(t){if(!c(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!p(d,a(t))}catch(t){return!0}};g.sham=!0,t.exports=!l||o((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?g:m},3009:(t,e,r)=>{var n=r(1052),o=TypeError,c=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw new o("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new c(t)}},5519:(t,e,r)=>{var n=r(2150);t.exports=n.Promise},4508:(t,e,r)=>{var n=r(9175),o=r(5309),c=r(3009);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=c.f(t);return(0,r.resolve)(e),r.promise}},4041:(t,e,r)=>{var n=r(9175),o=r(3755),c=r(5268),i=r(2032)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||c(r=n(s)[i])?e:o(r)}},5079:(t,e,r)=>{var n=r(5532),o=r(6555),c=r(5519),i=r(4694),s=r(2160),a=r(688),u=r(4041),f=r(4508),l=r(2470),d=c&&c.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!c&&i((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),r=a(t);return this.then(r?function(r){return f(e,t()).then((function(){return r}))}:t,r?function(r){return f(e,t()).then((function(){throw r}))}:t)}}),!o&&a(c)){var p=s("Promise").prototype.finally;d.finally!==p&&l(d,"finally",p,{unsafe:!0})}}}]);